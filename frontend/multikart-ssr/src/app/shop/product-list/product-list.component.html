<virtual-scroller [items]="products" (vsUpdate)="viewportItems = $event"
                  (vsEnd)="nextBatch($event, (products[products.length - 1].id))"
                  [bufferAmount]="5">

    <div fxLayout="row wrap" fxLayoutAlign="space-around center" #container id="container">
        <div class="list-item"
             *ngFor="let product of viewportItems; let i = index; trackBy: trackById"
             fxFlex="25%" fxFlex.md="33%" fxFlex.sm="50%" fxFlex.xs="100%"
             [routerLink]="['/products', product.id]">
            <app-product-preview [product]="product" class="animated fadeIn"></app-product-preview>
        </div>
    </div>

    <!--todo virtual scroller glitching-->
    <!--todo test bufferamount-->

    <div class="spinner-wrapper">
        <mat-progress-spinner *ngIf="loading" mode="indeterminate" color="primary"
                              [strokeWidth]="10"></mat-progress-spinner>
    </div>
</virtual-scroller>

